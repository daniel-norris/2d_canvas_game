(e=>{let t=e.getElementById("myCanvas"),l=t.getContext("2d"),r=t.width/2,a=t.height-30,i=(t.width-75)/2,d=2,o=-2,n=!1,h=!1,w=0,s=3,f=[];for(let e=0;e<5;e+=1){f[e]=[];for(let t=0;t<3;t+=1)f[e][t]={x:0,y:0,status:1}}drawBall=()=>{l.beginPath(),l.arc(r,a,10,0,2*Math.PI),l.fillStyle="#0095DD",l.fill(),l.closePath()},drawPaddle=()=>{l.beginPath(),l.rect(i,t.height-10,75,10),l.fillStyle="#0095DD",l.fill(),l.closePath()},drawBricks=()=>{for(let r=0;r<5;r++)for(let a=0;a<3;a++)if(1===f[r][a].status){var e=85*r+30,t=30*a+30;f[r][a].x=e,f[r][a].y=t,l.beginPath(),l.rect(e,t,75,20),l.fillStyle="#0095DD",l.fill(),l.closePath()}},draw=()=>{l.clearRect(0,0,t.width,t.height),drawBricks(),collisionDetection(),drawBall(),drawPaddle(),drawScore(),drawLives(),(r+d>t.width-10||r+d<10)&&(d=-d),a+o<10?o=-o:a+o>t.height-10&&(r>i&&r<i+75?o=-o:(s--,s?(r=t.width/2,a=t.height-30,d=2,o=-2,i=(t.width-75)/2):(alert("GAME OVER"),e.location.reload()))),r+=d,a+=o,n?(i+=7,i+75>t.width&&(i=t.width-75)):h&&(i-=7,i<0&&(i=0)),requestAnimationFrame(draw)},collisionDetection=()=>{for(var t=0;t<5;t++)for(var l=0;l<3;l++){var i=f[t][l];1==i.status&&r>i.x&&r<i.x+75&&a>i.y&&a<i.y+20&&(o=-o,i.status=0,w+=1,15===w&&(alert("YOU WIN, CONGRATULATIONS!"),e.location.reload()))}},drawScore=()=>{l.font="16px Arial",l.fillStyle="#0095DD",l.fillText("Score: "+w,8,20)},drawLives=()=>{l.font="16px Arial",l.fillStyle="#0095DD",l.fillText("Lives: "+s,t.width-65,20)},keyDownHandler=e=>{"Right"==e.key||"ArrowRight"==e.key?n=!0:"Left"!=e.key&&"ArrowLeft"!=e.key||(h=!0)},keyUpHandler=e=>{"Right"==e.key||"ArrowRight"==e.key?n=!1:"Left"!=e.key&&"ArrowLeft"!=e.key||(h=!1)},mouseMoveHandler=e=>{let l=e.clientX-t.offsetLeft;l>0&&l<t.width&&(i=l-37.5)},e.addEventListener("keydown",keyDownHandler,!1),e.addEventListener("keyup",keyUpHandler,!1),e.addEventListener("mousemove",mouseMoveHandler,!1),draw()})(document);